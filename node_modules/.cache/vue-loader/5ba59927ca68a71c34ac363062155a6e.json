{"remainingRequest":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stanislaw/WebstormProjects/ticket-schedule/src/components/account/Info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/src/components/account/Info.vue","mtime":1550472695472},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/babel-loader/lib/index.js","mtime":1547214326591},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/cache-loader/dist/cjs.js","mtime":1547214326837},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/index.js","mtime":1547214332895}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: \"Info\",\n    props: {\n        user: {\n\n        }\n    },\n    data: function() {\n        return {\n            error_password_text: '',\n            success_password_text: '',\n            new_password: '',\n            old_password: '',\n            redact: {\n                EMAIL: '',\n                PHONE: '',\n                FIRST_NAME: '',\n                LAST_NAME: '',\n                SEX: ''\n            },\n            dialog: false,\n            emailRules: [\n                v => !!v || \"E-mail є обов'язковим\",\n                v => /.[a-zA-Z/.]{1,}@[a-z]{1,}[.][a-z]{2,}/.test(v) || 'E-mail повинен бути вірним'\n            ],\n            sex_item: ['Не визначено','Чоловіча','Жіноча'],\n            sex_select: 0,\n            phoneRules: [\n                v => !!v || \"Телефон є обов'язковим\",\n                v => /.[0-9/+]{9,}/.test(v) || 'Телефон повинен бути вірним'\n            ],\n        }\n    },\n    methods: {\n        closeModal: function () {\n            this.error_password_text = '';\n            this.success_password_text = '';\n            this.new_password = '';\n            this.old_password = '';\n            this.dialog = false;\n        },\n        changePassword: function () {\n            this.error_password_text = '';\n            this.success_password_text = \"\";\n\n            let send = async (component, old_password, new_password) => {\n                let response = await window.api.user.changPassword(window.api.storage.getToken(), old_password, new_password);\n\n                if (response.status === 200) {\n                    component.error_password_text = '';\n                    component.success_password_text = \"Пароль змінено\";\n                } else if (response.status === 409) {\n                    component.error_password_text = 'Пароль не змінено';\n                    component.success_password_text = \"\";\n                }\n            };\n\n            send(this, this.old_password, this.new_password)\n        },\n        updateEMAIL: function (value) {\n            this.redact.EMAIL = value;\n        },\n        updatePHONE: function (value) {\n            this.redact.PHONE = value;\n        },\n        updateFIRST_NAME: function (value) {\n            this.redact.FIRST_NAME = value;\n        },\n        updateLAST_NAME: function (value) {\n            this.redact.LAST_NAME = value;\n        },\n        updateSEX: function (value) {\n            this.redact.SEX = this.sex_item.indexOf(value);\n        },\n        save: function () {\n            let start = async (user) => {\n                await window.api.user.changeInfo(window.api.storage.getToken(), user);\n            };\n\n            start(this.redact).then(function (v) {\n                window.location.reload()\n            });\n        },\n        init(user) {\n            this.redact.EMAIL = user.EMAIL;\n            this.redact.PHONE = user.PHONE;\n            this.redact.FIRST_NAME = user.FIRST_NAME;\n            this.redact.LAST_NAME = user.LAST_NAME;\n            this.redact.SEX = user.SEX;\n        }\n    },\n    created() {\n        alert(this.user.EMAIL);\n        this.redact.EMAIL = this.user.EMAIL\n    }\n}\n",{"version":3,"sources":["Info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Info.vue","sourceRoot":"src/components/account","sourcesContent":["<template>\n    <v-card class=\"info-block\">\n        <v-layout row wrap class=\"info-block\">\n            <!-- initialization of user profile redact variables here,\n                because need for synchronization of the it with props.user\n                because it is impossible to do from other place (maybe :) ) -->\n            {{ init(user) }}\n            <v-flex xs2>\n                <v-avatar>\n                    <img src=\"http://cdn.onlinewebfonts.com/svg/img_215059.png\"\n                         class=\"avatar\"\n                         alt=\"avatar\">\n                </v-avatar>\n            </v-flex>\n            <v-flex xs9>\n                <v-card-text class=\"text-lg-left\">\n                    {{ $props.user.FIRST_NAME }} {{ $props.user.LAST_NAME }}\n                </v-card-text>\n            </v-flex>\n\n            <v-flex xs1>\n                <v-layout row justify-center>\n                    <v-dialog v-model=\"dialog\" persistent max-width=\"600px\">\n                        <v-icon  slot=\"activator\" class=\"rotation setting\">settings</v-icon>\n                        <v-card>\n                            <v-card-title>\n                                <span class=\"headline\">Профіль</span>\n                            </v-card-title>\n                            <v-card-text>\n                                <v-container grid-list-md style=\"margin-top: -40px\">\n                                    <v-layout wrap>\n                                        <v-flex xs12 sm12 md12 lg12>\n                                            <v-text-field\n                                                    :rules=\"emailRules\"\n                                                    label=\"Email\"\n                                                    v-bind:value=\"user.EMAIL\"\n                                                    v-on:input=\"updateEMAIL\"\n                                            ></v-text-field>\n                                        </v-flex>\n\n                                        <v-flex xs12 sm12 md12 lg12>\n                                            <v-text-field\n                                                    :rules=\"phoneRules\"\n                                                    label=\"Телефон\"\n                                                    v-bind:value=\"user.PHONE\"\n                                                    v-on:input=\"updatePHONE\"\n                                            ></v-text-field>\n                                        </v-flex>\n\n                                        <v-flex xs12 sm12 md12 lg6>\n                                            <v-text-field\n                                                    label=\"Імя\"\n                                                    v-bind:value=\"user.FIRST_NAME\"\n                                                    v-on:input=\"updateFIRST_NAME\"\n                                            ></v-text-field>\n                                        </v-flex>\n\n                                        <v-flex xs12 sm12 md12 lg6>\n                                            <v-text-field\n                                                    label=\"Фамілія\"\n                                                    v-bind:value=\"user.LAST_NAME\"\n                                                    v-on:input=\"updateLAST_NAME\"\n                                            ></v-text-field>\n                                        </v-flex>\n\n                                        <v-flex xs12 sm12 md12 lg12>\n                                            <v-autocomplete\n                                                    v-bind:value=\"sex_item[user.SEX]\"\n                                                    v-on:input=\"updateSEX\"\n                                                    :items=\"sex_item\"\n                                                    label=\"Стать\"\n                                                    :readonly=\"false\"\n                                            ></v-autocomplete>\n                                        </v-flex>\n                                    </v-layout>\n                                </v-container>\n                            </v-card-text>\n                            <v-card style=\"width: 90%; margin-left: 5%; margin-top: -30px\">\n                                <v-container grid-list-md>\n                                    <v-layout wrap>\n                                        <v-flex xs12 sm12 md12 lg12 :class=\"{errorBorder: error_password_text.length > 0, successBorder: success_password_text.length > 0}\">\n                                            <v-text-field\n                                                    label=\"Старий пароль\"\n                                                    v-model=\"old_password\"\n                                                    type=\"password\"\n                                            ></v-text-field>\n                                        </v-flex>\n\n                                        <v-flex xs12 sm12 md12 lg12 style=\"margin-top: 5px\" :class=\"{errorBorder: error_password_text.length > 0, successBorder: success_password_text.length > 0}\">\n                                            <v-text-field\n                                                    label=\"Новий пароль\"\n                                                    v-model=\"new_password\"\n                                                    type=\"password\"\n                                            ></v-text-field>\n                                        </v-flex>\n                                        <v-flex xs12 sm12 md12 lg12>\n                                            <div>\n                                                <small style=\"color: green; padding: 5px; margin-left: 10px\" v-if=\"error_password_text.length < 1\">{{success_password_text}}</small>\n                                                <small style=\"color: red; padding: 5px; margin-left: 10px\" v-if=\"success_password_text.length < 1\">{{error_password_text}}</small>\n                                            </div>\n                                            <v-btn color=\"blue darken-1\" flat @click=\"changePassword\">Змінити пароль</v-btn>\n                                        </v-flex>\n                                    </v-layout>\n                                </v-container>\n                            </v-card>\n                            <v-card-actions>\n                                <v-spacer></v-spacer>\n                                <v-btn color=\"blue darken-1\" flat @click=\"closeModal\">Close</v-btn>\n                                <v-btn color=\"blue darken-1\" flat @click=\"save\">Save</v-btn>\n                            </v-card-actions>\n                        </v-card>\n                    </v-dialog>\n                </v-layout>\n            </v-flex>\n            <v-flex xs12>\n                <v-card-text class=\"text-lg-left\">\n                    Емайл: {{ $props.user.EMAIL }}\n                </v-card-text>\n            </v-flex>\n            <v-flex xs12>\n                <v-card-text class=\"text-lg-left\">\n                    Телефон: {{ $props.user.PHONE }}\n                </v-card-text>\n            </v-flex>\n            <v-flex xs12>\n                <v-card-text class=\"text-lg-left\">\n                    Стать: {{ $props.user.SEX === 1 ? \"Чоловіча\" : $props.user.SEX === 2 ? \"Жіноча\" : \"Не визначено\"}}\n                </v-card-text>\n            </v-flex>\n        </v-layout>\n    </v-card>\n</template>\n\n<script>\n    export default {\n        name: \"Info\",\n        props: {\n            user: {\n\n            }\n        },\n        data: function() {\n            return {\n                error_password_text: '',\n                success_password_text: '',\n                new_password: '',\n                old_password: '',\n                redact: {\n                    EMAIL: '',\n                    PHONE: '',\n                    FIRST_NAME: '',\n                    LAST_NAME: '',\n                    SEX: ''\n                },\n                dialog: false,\n                emailRules: [\n                    v => !!v || \"E-mail є обов'язковим\",\n                    v => /.[a-zA-Z/.]{1,}@[a-z]{1,}[.][a-z]{2,}/.test(v) || 'E-mail повинен бути вірним'\n                ],\n                sex_item: ['Не визначено','Чоловіча','Жіноча'],\n                sex_select: 0,\n                phoneRules: [\n                    v => !!v || \"Телефон є обов'язковим\",\n                    v => /.[0-9/+]{9,}/.test(v) || 'Телефон повинен бути вірним'\n                ],\n            }\n        },\n        methods: {\n            closeModal: function () {\n                this.error_password_text = '';\n                this.success_password_text = '';\n                this.new_password = '';\n                this.old_password = '';\n                this.dialog = false;\n            },\n            changePassword: function () {\n                this.error_password_text = '';\n                this.success_password_text = \"\";\n\n                let send = async (component, old_password, new_password) => {\n                    let response = await window.api.user.changPassword(window.api.storage.getToken(), old_password, new_password);\n\n                    if (response.status === 200) {\n                        component.error_password_text = '';\n                        component.success_password_text = \"Пароль змінено\";\n                    } else if (response.status === 409) {\n                        component.error_password_text = 'Пароль не змінено';\n                        component.success_password_text = \"\";\n                    }\n                };\n\n                send(this, this.old_password, this.new_password)\n            },\n            updateEMAIL: function (value) {\n                this.redact.EMAIL = value;\n            },\n            updatePHONE: function (value) {\n                this.redact.PHONE = value;\n            },\n            updateFIRST_NAME: function (value) {\n                this.redact.FIRST_NAME = value;\n            },\n            updateLAST_NAME: function (value) {\n                this.redact.LAST_NAME = value;\n            },\n            updateSEX: function (value) {\n                this.redact.SEX = this.sex_item.indexOf(value);\n            },\n            save: function () {\n                let start = async (user) => {\n                    await window.api.user.changeInfo(window.api.storage.getToken(), user);\n                };\n\n                start(this.redact).then(function (v) {\n                    window.location.reload()\n                });\n            },\n            init(user) {\n                this.redact.EMAIL = user.EMAIL;\n                this.redact.PHONE = user.PHONE;\n                this.redact.FIRST_NAME = user.FIRST_NAME;\n                this.redact.LAST_NAME = user.LAST_NAME;\n                this.redact.SEX = user.SEX;\n            }\n        },\n        created() {\n            alert(this.user.EMAIL);\n            this.redact.EMAIL = this.user.EMAIL\n        }\n    }\n</script>\n\n<style lang=\"sass\" scoped>\n    .errorBorder\n        color: red !important\n        border: 1px solid red !important\n\n    .successBorder\n        border: 1px solid green !important\n\n    .info-block\n        padding: 20px 10px 10px 10px\n        background-color: whitesmoke !important\n\n        .avatar\n            background-size: contain\n\n        .setting\n            cursor: pointer\n            margin-top: 7px\n\n    .rotation\n        border-radius: 50%\n        -webkit-transition: -webkit-transform .3s ease-in-out\n        transition:         transform .3s ease-in-out\n\n    .rotation:hover\n        -webkit-transform: rotate(45deg)\n        transform: rotate(45deg)\n\n</style>"]}]}