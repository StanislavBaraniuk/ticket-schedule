{"remainingRequest":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stanislaw/WebstormProjects/ticket-schedule/src/components/account/ActiveOrders.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/src/components/account/ActiveOrders.vue","mtime":1549576784962},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/cache-loader/dist/cjs.js","mtime":1547214326837},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/babel-loader/lib/index.js","mtime":1547214326591},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/cache-loader/dist/cjs.js","mtime":1547214326837},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/index.js","mtime":1547214332895}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapGetters} from 'vuex'\nimport 'animate.css'\n\nexport default {\n    name: \"ActiveOrders\",\n    props: {\n        all_orders: {\n\n        }\n    },\n    created() {\n\n            this.LOAD_ORDERS(this, window.api.storage.getCookie('token') !== undefined ? window.api.storage.getCookie('token') : \"0\")\n\n    },\n    methods: {\n        cacnel: function (code, index) {\n            this.CANCEL_ORDER(this, window.api.storage.getCookie('token') !== undefined ? window.api.storage.getCookie('token') : \"0\", code, index)\n        },\n        LOAD_ORDERS: async (component, token) => {\n            {\n                let data = await window.api.user.get_all_orders(token);\n\n                if (data.status === 200) {\n                    component.$store.dispatch(\"SET_ORDERS\", data.data);\n                } else {\n                    component.$store.dispatch(\"SET_ORDERS\", []);\n                }\n\n            }\n        },\n        CANCEL_ORDER: async (component, token, code, index) => {\n            {\n\n                let data = await window.api.user.cancel_order(token, code);\n\n                if (data.status === 200) {\n                    component.orders.splice(index, 1);\n                }\n\n            }\n        },\n    },\n    computed: {\n        ... mapGetters ({\n            orders: \"GET_ORDERS\"\n        })\n    }\n\n}\n",{"version":3,"sources":["ActiveOrders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ActiveOrders.vue","sourceRoot":"src/components/account","sourcesContent":["<template>\n    <v-card class=\"padding600 active-orders-card\">\n        <v-layout row wrap>\n            <h3 class=\"main-h\"><v-chip text-color=\"white\" color=\"red\"><v-icon>shopping_cart</v-icon> {{ orders.length }}</v-chip>  Активні бронювання</h3>\n            <v-flex xs12>\n                <v-flex xs12 class=\"if-not-found\" v-if=\"orders.filter(function(order) {return order.ORDER.STATUS === 1; }).length === 0\">\n                    Відсутні\n                </v-flex>\n                <v-flex xs12 sm12 md12 lg12 v-if=\"orders.filter(function(order) {return order.ORDER.STATUS === 1; }).length > 0\" v-for=\"(item , index) in orders.filter(function(order) {return order.ORDER.STATUS === 1; })\" :key=\"index\" class=\"\">\n                    <v-card>\n                        <v-container grid-list-md text-xs-center class=\"active-orders-card-container\">\n                            <v-layout row wrap>\n                                <v-flex xs12 sm12 md4 lg4>\n                                    <v-card-title>\n                                        <v-flex xs12 sm1 md1 lg1>\n                                            <i class=\"material-icons t-icon\">{{ item.TICKET.TYPE === 0 ? \"directions_railway\" : \"directions_bus\"}}</i>\n                                        </v-flex>\n                                        <v-flex xs12 sm11 md11 lg11>\n                                            <h3 class=\"t-name\">{{ item.TICKET.NAME }}</h3>\n                                        </v-flex>\n                                    </v-card-title>\n                                </v-flex>\n                                <v-flex xs12 sm12 md1 lg1>\n                                    <div>\n                                        <small>Місце</small>\n                                        <h1>{{ item.ORDER.PLACE }}</h1>\n                                    </div>\n                                </v-flex>\n                                <v-flex xs12 sm12 md7 lg7>\n                                    <v-card-actions class=\"card-actions\">\n                                        <v-spacer></v-spacer>\n                                        <v-btn disabled color=\"orange\" class=\"price\">{{ item.TICKET.PRICE }} ₴</v-btn>\n                                        <v-btn color=\"green\" dark v-on:click=\"cacnel(item.ORDER.CODE, index)\">Відмінити\n                                            <v-icon dark right>delete</v-icon>\n                                        </v-btn>\n                                    </v-card-actions>\n                                </v-flex>\n                                <v-flex xs12 sm6 md4 lg4 >\n                                    <v-stepper vertical class=\"from\">\n                                        <v-stepper-step complete=\"\" complete-icon=\"\">\n                                            {{ item.TICKET.FROM_PLACE }}\n                                            <small>{{ item.TICKET.FROM_TIME | timeNormalizer }}</small>\n                                        </v-stepper-step>\n\n                                        <v-stepper-content >\n\n                                        </v-stepper-content>\n\n                                        <v-stepper-step complete=\"\" complete-icon=\"\">\n                                            {{ item.TICKET.WAY_TIME }}\n                                            <small>час у дорозі</small>\n                                        </v-stepper-step>\n\n                                        <v-stepper-content>\n\n                                        </v-stepper-content>\n\n                                        <v-stepper-step complete=\"\" complete-icon=\"\">\n                                            {{ item.TICKET.TO_PLACE }}\n                                            <small>{{ item.TICKET.TO_TIME | timeNormalizer }}</small>\n                                        </v-stepper-step>\n                                    </v-stepper>\n                                </v-flex>\n                                <v-flex xs12 sm6 md4 lg4>\n                                    Маршрут\n                                    <v-stepper vertical class=\"way-stepper\">\n                                        <v-stepper-step complete=\"\" complete-icon=\"\" v-for=\"(state, s_index) in item.TICKET.STATIONS\" :key=\"s_index\">\n                                            {{state}}\n                                            <small>Зупинка</small>\n                                        </v-stepper-step>\n\n                                        <v-stepper-content >\n\n                                        </v-stepper-content>\n                                    </v-stepper>\n                                </v-flex>\n                                <v-flex xs12 sm12 md4 lg4>\n                                    <div class=\"QR-block\">\n                                        <div class=\"QR\">\n                                            <img :src=\" 'https://api.qrserver.com/v1/create-qr-code/?size=230x230&data=' + item.ORDER.CODE \" alt=\"\">\n                                        </div>\n                                        <small>{{ item.ORDER.CODE }}</small>\n                                    </div>\n                                </v-flex>\n                            </v-layout>\n                        </v-container>\n                    </v-card>\n                    <div class=\"space\"></div>\n                </v-flex>\n            </v-flex>\n        </v-layout>\n    </v-card>\n</template>\n\n<script>\n    import {mapGetters} from 'vuex'\n    import 'animate.css'\n\n    export default {\n        name: \"ActiveOrders\",\n        props: {\n            all_orders: {\n\n            }\n        },\n        created() {\n\n                this.LOAD_ORDERS(this, window.api.storage.getCookie('token') !== undefined ? window.api.storage.getCookie('token') : \"0\")\n\n        },\n        methods: {\n            cacnel: function (code, index) {\n                this.CANCEL_ORDER(this, window.api.storage.getCookie('token') !== undefined ? window.api.storage.getCookie('token') : \"0\", code, index)\n            },\n            LOAD_ORDERS: async (component, token) => {\n                {\n                    let data = await window.api.user.get_all_orders(token);\n\n                    if (data.status === 200) {\n                        component.$store.dispatch(\"SET_ORDERS\", data.data);\n                    } else {\n                        component.$store.dispatch(\"SET_ORDERS\", []);\n                    }\n\n                }\n            },\n            CANCEL_ORDER: async (component, token, code, index) => {\n                {\n\n                    let data = await window.api.user.cancel_order(token, code);\n\n                    if (data.status === 200) {\n                        component.orders.splice(index, 1);\n                    }\n\n                }\n            },\n        },\n        computed: {\n            ... mapGetters ({\n                orders: \"GET_ORDERS\"\n            })\n        }\n\n    }\n</script>\n\n<style lang=\"sass\" scoped>\n    .padding600\n        @media all and (min-width: 960px)\n            margin-left: 20px\n        @media all and (max-width: 960px)\n            margin-top: 20px\n\n    .active-orders-card\n        padding: 10px 10px 10px 10px\n        background-color: whitesmoke\n\n        .main-h\n            margin-bottom: 10px\n\n        .active-orders-card-container\n            padding: 10px 0 0\n\n            .t-icon\n                margin-left: 8px\n                margin-top: 10px\n\n            .t-name\n                margin-top: 10px\n                text-align: center\n\n            .card-actions\n                padding-right: 20px\n\n            .price\n                font-size: 20px\n                color: black !important\n\n            .from\n                height: 260px\n                box-shadow: none\n\n            .way-stepper\n                height: 260px\n                overflow-y: scroll\n                box-shadow: none\n\n            .QR-block\n                height: 260px\n                overflow-y: scroll\n\n                .QR\n                    height: 90%\n                    width: 100%\n                    background-size: contain\n                    background-image: url('http://e-asveta.adu.by/images/content/images/material/QR-cod1.png')\n                    background-position: center\n\n    .space\n        height: 20px\n\n    .if-not-found\n        width: 100%\n        left: 0\n        margin-top: 43%\n        text-align: center\n        position: absolute\n        font-size: 20px\n        color: darkgray\n        font-weight: bold\n\n</style>"]}]}