{"remainingRequest":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stanislaw/WebstormProjects/ticket-schedule/src/components/admin/tools/Ticket/components/TicketAdd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/src/components/admin/tools/Ticket/components/TicketAdd.vue","mtime":1561156341462},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/cache-loader/dist/cjs.js","mtime":1547214326837},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/babel-loader/lib/index.js","mtime":1547214326591},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/cache-loader/dist/cjs.js","mtime":1547214326837},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/index.js","mtime":1547214332895}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from 'vuex';\nexport default {\n    name: \"TicketAdd\",\n    data: function () {\n        return {\n            ID: 0,\n            NAME: '',\n            PRICE: 0,\n            FROM_PLACE: '',\n            FROM_PLACE_ID: 1,\n            TO_PLACE_ID: 1,\n            TO_PLACE: 1,\n            TYPE: 1,\n            STATIONS: [],\n            PLACES: '',\n            error: \"\",\n            transport: [\"\", \"Потяг\", \"Автобус\"],\n            priceRules: [\n                v => !!v || 'Введіть ціну',\n                v => /.[\\d]/.test(v) || 'Ціна помилкова'\n            ]\n        }\n    },\n    props: {\n        addActive: {\n\n        },\n        chips: {\n            default: null\n        },\n        items: {\n            default: null\n        }\n    },\n    methods: {\n        add: function () {\n            if (this.NAME.length > 0 && parseInt(this.ID) >= 0 && this.PRICE > 0 && this.FROM_PLACE !== this.TO_PLACE && this.FROM_PLACE.length !== 0 && this.TO_PLACE.length !== 0) {\n                let chosenFromPlaceName = this.$data.FROM_PLACE;\n                let chosenToPlaceName = this.$data.TO_PLACE;\n\n                let fromPlace = chosenFromPlaceName === \"\" ?\n                    this.$props.items[this.$data.FROM_PLACE_ID].ID :\n                    this.$props.items.filter(function(v) { return v.NAME === chosenFromPlaceName })[0].ID;\n\n                let toPlace = chosenToPlaceName === \"\" ?\n                    this.$props.items[this.$data.TO_PLACE_ID].ID :\n                    this.$props.items.filter(function(v) { return v.NAME === chosenToPlaceName })[0].ID;\n\n                let stations = this.STATIONS.filter(function(v) { return v.NAME !== fromPlace && v.NAME !== toPlace });\n\n                stations = this.$props.items.filter(function(v) {\n                    for (let i = 0; i < stations.length; i++)  {\n                        if (v.NAME === stations[i]) {\n                            return true\n                        }\n                    }\n\n                    return false\n                }).map(function (v) {\n                    return v.ID\n                });\n\n                let ticket = {\n                    ID: this.ID,\n                    NAME: this.NAME,\n                    PRICE: this.PRICE,\n                    FROM_DATE: this.d_date,\n                    TO_DATE: this.a_date,\n                    FROM_PLACE: fromPlace,\n                    TO_PLACE: toPlace,\n                    TYPE: this.TYPE,\n                    FROM_TIME: this.d_time,\n                    TO_TIME: this.a_time,\n                    WAY_TIME: String((new Date(this.a_date + \" \" + this.a_time) - new Date(this.d_date + \" \" + this.d_time))/1000).toHHMMSS(),\n                    STATIONS: stations.join(),\n                    PLACES: this.PLACES\n                };\n\n                let add = async (ticket) => {\n                    await window.api.ticket.add(window.api.storage.getToken(), ticket)\n                };\n                add(ticket).then(function () {\n                    window.location.reload();\n                });\n            } else {\n                this.error = \"Впевніться що: назва введена, ІД >= 0, ціна > 0, місце відправлення != місцю прибуття та обидві точки є вказаними\"\n            }\n        }\n    },\n    computed: {\n\n        d_time: {\n            get () {\n                return this.def_d_time;\n            },\n            set (value) {\n                this.$store.commit('SET_D_TIME', value)\n            }\n        },\n        a_time: {\n            get () {\n                return this.def_a_time;\n            },\n            set (value) {\n                this.$store.commit('SET_A_TIME', value)\n            }\n        },\n        a_date: {\n            get () {\n                return this.def_a_date;\n            },\n            set (value) {\n                this.$store.commit('SET_A_DATE', value)\n            }\n        },\n        d_date: {\n            get () {\n                return this.def_d_date;\n            },\n            set (value) {\n                this.$store.commit('SET_D_DATE', value)\n            }\n        },\n        ...mapGetters({\n            def_tickets: 'GET_ALL_TICKETS',\n            def_d_time: 'GET_D_TIME',\n            def_a_time: 'GET_A_TIME',\n            def_a_date: 'GET_A_DATE',\n            def_d_date: 'GET_D_DATE',\n        })\n    }\n\n}\n",{"version":3,"sources":["TicketAdd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"TicketAdd.vue","sourceRoot":"src/components/admin/tools/Ticket/components","sourcesContent":["<template>\n        <v-card class=\"ticket-add\" v-if=\"addActive.v\">\n            <v-layout row wrap>\n                <v-flex xs12 sm12 md2 lg1>\n                    <v-text-field\n                            label=\"ІД\"\n                            v-model=\"ID\"\n                    ></v-text-field>\n                </v-flex>\n\n                <v-flex xs12 sm12 md5 lg6>\n                    <v-text-field\n                            label=\"Назва\"\n                            v-model=\"NAME\"\n                    ></v-text-field>\n                </v-flex>\n\n                <v-flex xs12 sm12 md3 lg3>\n                    <v-text-field\n                            label=\"Ціна\"\n                            type=\"number\"\n                            v-model=\"PRICE\"\n                    ></v-text-field>\n                </v-flex>\n\n                <v-flex xs12 sm12 md2 lg2>\n                    <v-autocomplete\n                            :items=\"[1,2]\"\n                            :label=\"'Транспорт - ' + transport[TYPE]\"\n                            :readonly=\"false\"\n                            v-model=\"TYPE\"\n                    ></v-autocomplete>\n                </v-flex>\n\n                <v-flex xs12 sm12 md12 lg8>\n                    <v-autocomplete\n                            :items=\"items.map(function(v) { return v.NAME })\"\n                            :label=\"'Місце відпревлення'\"\n                            :readonly=\"false\"\n                            v-model=\"FROM_PLACE\"\n                    ></v-autocomplete>\n                </v-flex>\n\n                <v-flex xs12 sm12 md6 lg2>\n                    <v-menu :close-on-content-click=\"false\" :nudge-right=\"40\"\n                            lazy\n                            transition=\"scale-transition\"\n                            offset-y\n                            full-width\n                            min-width=\"290px\"\n                    >\n                        <v-text-field\n                                slot=\"activator\"\n                                label=\"Час відправлення\"\n                                placeholder=\"День відправки\"\n                                readonly\n                                v-model=\"d_time\"\n                        ></v-text-field>\n                        <v-time-picker v-model=\"d_time\" format=\"24hr\"></v-time-picker>\n                    </v-menu>\n                </v-flex>\n\n                <v-flex xs12 sm12 md6 lg2>\n                    <v-menu :close-on-content-click=\"false\" :nudge-right=\"40\"\n                            lazy\n                            transition=\"scale-transition\"\n                            offset-y\n                            full-width\n                            min-width=\"290px\"\n                    >\n                        <v-text-field\n                                slot=\"activator\"\n                                v-model=\"d_date\"\n                                label=\"День відправлення\"\n                                placeholder=\"\"\n                                readonly\n                        ></v-text-field>\n                        <v-date-picker v-model=\"d_date\"></v-date-picker>\n                    </v-menu>\n                </v-flex>\n\n                <v-flex xs12 sm12 md12 lg8>\n                    <v-autocomplete\n                            :items=\"items.map(function(v) { return v.NAME })\"\n                            :label=\"'Місце прибуття'\"\n                            :readonly=\"false\"\n                            v-model=\"TO_PLACE\"\n                    ></v-autocomplete>\n                </v-flex>\n\n                <v-flex xs12 sm12 md6 lg2>\n                    <v-menu :close-on-content-click=\"false\" :nudge-right=\"40\"\n                            lazy\n                            transition=\"scale-transition\"\n                            offset-y\n                            full-width\n                            min-width=\"290px\"\n                    >\n                        <v-text-field\n                                slot=\"activator\"\n                                label=\"Час прибуття\"\n                                placeholder=\"\"\n                                readonly\n                                v-model=\"a_time\"\n                        ></v-text-field>\n                        <v-time-picker v-model=\"a_time\" format=\"24hr\"></v-time-picker>\n                    </v-menu>\n                </v-flex>\n\n                <v-flex xs12 sm12 md6 lg2>\n                    <v-menu :close-on-content-click=\"false\" :nudge-right=\"40\"\n                            lazy\n                            transition=\"scale-transition\"\n                            offset-y\n                            full-width\n                            min-width=\"290px\"\n                    >\n                        <v-text-field\n                                slot=\"activator\"\n                                v-model=\"a_date\"\n                                label=\"День прибуття\"\n                                placeholder=\"\"\n                                readonly\n                        ></v-text-field>\n                        <v-date-picker v-model=\"a_date\"></v-date-picker>\n                    </v-menu>\n                </v-flex>\n\n                <v-combobox\n                        v-model=\"STATIONS\"\n                        :items=\"items.filter(function(v) { return v.NAME !== FROM_PLACE && v.NAME !== TO_PLACE }).map(function(v) { return v.NAME })\"\n                        label=\"Вкажіть міста для створення маршруту\"\n                        :readonly=\"false\"\n                        chips\n                        clearable\n                        solo\n                        multiple\n                >\n                    <template slot=\"selection\" slot-scope=\"data_r\">\n                        <v-chip\n                                :selected=\"data_r.selected.NAME\"\n                                close\n                                @input=\"remove(data_r.item.NAME)\"\n                        >\n                            <!--<strong>{{ items.filter(function(v) { return v.ID === parseInt(data_r.item.ID) })[0].ID }}</strong>&nbsp;-->\n                            <span>{{data_r.item}}</span>\n                        </v-chip>\n                    </template>\n                </v-combobox>\n\n                <v-flex xs12 sm12 md12 lg12>\n                    <v-text-field\n                            label=\"Посадкові місця\"\n                            v-model=\"PLACES\"\n                    ></v-text-field>\n                </v-flex>\n\n            </v-layout>\n            <small style=\"color: red\">{{ error }}</small>\n            <v-flex xs12>\n                <v-btn dark color=\"indigo\" @click=\"add\">Додати</v-btn>\n            </v-flex>\n\n        </v-card>\n</template>\n\n<script>\n    import { mapGetters } from 'vuex';\n    export default {\n        name: \"TicketAdd\",\n        data: function () {\n            return {\n                ID: 0,\n                NAME: '',\n                PRICE: 0,\n                FROM_PLACE: '',\n                FROM_PLACE_ID: 1,\n                TO_PLACE_ID: 1,\n                TO_PLACE: 1,\n                TYPE: 1,\n                STATIONS: [],\n                PLACES: '',\n                error: \"\",\n                transport: [\"\", \"Потяг\", \"Автобус\"],\n                priceRules: [\n                    v => !!v || 'Введіть ціну',\n                    v => /.[\\d]/.test(v) || 'Ціна помилкова'\n                ]\n            }\n        },\n        props: {\n            addActive: {\n\n            },\n            chips: {\n                default: null\n            },\n            items: {\n                default: null\n            }\n        },\n        methods: {\n            add: function () {\n                if (this.NAME.length > 0 && parseInt(this.ID) >= 0 && this.PRICE > 0 && this.FROM_PLACE !== this.TO_PLACE && this.FROM_PLACE.length !== 0 && this.TO_PLACE.length !== 0) {\n                    let chosenFromPlaceName = this.$data.FROM_PLACE;\n                    let chosenToPlaceName = this.$data.TO_PLACE;\n\n                    let fromPlace = chosenFromPlaceName === \"\" ?\n                        this.$props.items[this.$data.FROM_PLACE_ID].ID :\n                        this.$props.items.filter(function(v) { return v.NAME === chosenFromPlaceName })[0].ID;\n\n                    let toPlace = chosenToPlaceName === \"\" ?\n                        this.$props.items[this.$data.TO_PLACE_ID].ID :\n                        this.$props.items.filter(function(v) { return v.NAME === chosenToPlaceName })[0].ID;\n\n                    let stations = this.STATIONS.filter(function(v) { return v.NAME !== fromPlace && v.NAME !== toPlace });\n\n                    stations = this.$props.items.filter(function(v) {\n                        for (let i = 0; i < stations.length; i++)  {\n                            if (v.NAME === stations[i]) {\n                                return true\n                            }\n                        }\n\n                        return false\n                    }).map(function (v) {\n                        return v.ID\n                    });\n\n                    let ticket = {\n                        ID: this.ID,\n                        NAME: this.NAME,\n                        PRICE: this.PRICE,\n                        FROM_DATE: this.d_date,\n                        TO_DATE: this.a_date,\n                        FROM_PLACE: fromPlace,\n                        TO_PLACE: toPlace,\n                        TYPE: this.TYPE,\n                        FROM_TIME: this.d_time,\n                        TO_TIME: this.a_time,\n                        WAY_TIME: String((new Date(this.a_date + \" \" + this.a_time) - new Date(this.d_date + \" \" + this.d_time))/1000).toHHMMSS(),\n                        STATIONS: stations.join(),\n                        PLACES: this.PLACES\n                    };\n\n                    let add = async (ticket) => {\n                        await window.api.ticket.add(window.api.storage.getToken(), ticket)\n                    };\n                    add(ticket).then(function () {\n                        window.location.reload();\n                    });\n                } else {\n                    this.error = \"Впевніться що: назва введена, ІД >= 0, ціна > 0, місце відправлення != місцю прибуття та обидві точки є вказаними\"\n                }\n            }\n        },\n        computed: {\n\n            d_time: {\n                get () {\n                    return this.def_d_time;\n                },\n                set (value) {\n                    this.$store.commit('SET_D_TIME', value)\n                }\n            },\n            a_time: {\n                get () {\n                    return this.def_a_time;\n                },\n                set (value) {\n                    this.$store.commit('SET_A_TIME', value)\n                }\n            },\n            a_date: {\n                get () {\n                    return this.def_a_date;\n                },\n                set (value) {\n                    this.$store.commit('SET_A_DATE', value)\n                }\n            },\n            d_date: {\n                get () {\n                    return this.def_d_date;\n                },\n                set (value) {\n                    this.$store.commit('SET_D_DATE', value)\n                }\n            },\n            ...mapGetters({\n                def_tickets: 'GET_ALL_TICKETS',\n                def_d_time: 'GET_D_TIME',\n                def_a_time: 'GET_A_TIME',\n                def_a_date: 'GET_A_DATE',\n                def_d_date: 'GET_D_DATE',\n            })\n        }\n\n    }\n</script>\n\n<style lang=\"sass\" scoped>\n    .ticket-add\n        padding: 30px\n</style>"]}]}