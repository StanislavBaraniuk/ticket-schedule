{"remainingRequest":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stanislaw/WebstormProjects/ticket-schedule/src/components/authorization/Authorization.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/src/components/authorization/Authorization.vue","mtime":1550037668651},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/cache-loader/dist/cjs.js","mtime":1547214326837},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/babel-loader/lib/index.js","mtime":1547214326591},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/cache-loader/dist/cjs.js","mtime":1547214326837},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/index.js","mtime":1547214332895}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: \"Authorization\",\n    data: () => ({\n        password: '7654321AsD',\n        email: 'Stanislavbaraniuk@gmail.com',\n        login_error: '',\n        activeBtn: 0,\n        showNav: true,\n        emailRules: [\n            v => !!v || 'E-mail є обовязковим',\n            v => /.[a-zA-Z/.]{1,}@[a-z]{1,}[.][a-z]{2,}/.test(v) || 'E-mail повинен бути вірним'\n        ],\n        passwordRules: [\n            v => !!v || 'Пароль є обовязковим',\n            v => /.(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/.test(v) || 'Пароль повинен містити 8 символів та складатись з символів a-z, A-Z, 0-9'\n        ]\n    }),\n    methods: {\n        checkPassword(pass) {\n            let is_numb = false, is_az = false, is_AZ = false;\n\n            if (pass.length >= 8) {\n                for (let i = 0; i < pass.length; i++) {\n                    is_numb = pass[i].match(/\\d/) ? true : is_numb;\n                    is_az = pass[i].match(/\\d/) ? true : is_az;\n                    is_AZ = pass[i].match(/\\d/) ? true : is_AZ;\n                }\n            } else {\n                return pass\n            }\n        },\n        login() {\n            if (/.[a-zA-Z/.]{1,}@[a-z]{1,}[.][a-z]{2,}/.test(this.email) && /.(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/.test(this.password)) {\n                this.TRY_LOGIN(this, this.email, this.password);\n            }\n        },\n        TRY_LOGIN: async (component, email, password) => {\n            let response = await window.api.user.login(email, password);\n\n            if (response.status === 200) {\n                window.api.storage.setCookie(\"token\", response.data);\n                window.location.href = '/';\n            } else if(response.status === 401)  {\n                component.login_error = \"Не вірний логін або пароль\"\n            } else {\n                component.login_error = \"Щось пішло не так :(\"\n            }\n        },\n        forgetPass() {\n            if (/.[a-zA-Z/.]{1,}@[a-z]{1,}[.][a-z]{2,}/.test(this.email)) {\n                document.getElementById('alert').style.visibility = 'visible';\n                setTimeout(function () {\n                    document.getElementById('alert').style.visibility = 'hidden';\n                    window.location.href = '/';\n                }, 3000);\n                window.api.user.forget_password(this.email).then(function(result) {\n                    alert(result);\n                });\n            }\n        },\n        registration() {\n            if (/.[a-zA-Z/.]{1,}@[a-z]{1,}[.][a-z]{2,}/.test(this.email) && /.(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/.test(this.password)) {\n                window.api.user.registration(this.email, this.password).then(function(result) {\n                    window.api.storage.setCookie(\"token\", result.data);\n                    window.location.href = '/';\n                });\n            }\n        }\n    }\n}\n",{"version":3,"sources":["Authorization.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Authorization.vue","sourceRoot":"src/components/authorization","sourcesContent":["<template>\n    <div class=\"auth-page\">\n        <div id=\"alert\" style=\"margin-top: 70px; position: absolute; visibility: hidden\">\n            <v-alert\n                    :value=\"true\"\n                    type=\"info\"\n            >\n                Запит на зміну паролю надіслано на вказаний email\n            </v-alert>\n        </div>\n        <v-container grid-list-md text-md-center fill-height class=\"authorization\" >\n            <v-layout row align-center fill-height class=\"test\">\n                <v-flex xs12 sm6 md6 lg4 offset-lg4 offset-md3 offset-sm3>\n                    <v-card\n                            class=\"hide-overflow\"\n\n                    >\n\n                        <v-card-text class=\"text-xs-center\" v-if=\"activeBtn === 0\">\n                            <h1>Вхід</h1>\n                            <small style=\"color: red\">{{login_error}}</small>\n                            <v-flex xs12>\n                                <v-text-field\n                                        label=\"Емайл\"\n                                        outline\n                                        :rules=\"emailRules\"\n                                        v-model=\"email\"\n                                ></v-text-field>\n                            </v-flex>\n\n                            <v-flex xs12>\n                                <v-text-field\n                                        label=\"Пароль\"\n                                        outline\n                                        type=\"password\"\n                                        :rules=\"passwordRules\"\n                                        v-model=\"password\"\n                                ></v-text-field>\n                            </v-flex>\n\n                            <div class=\"h-space\"></div>\n\n                            <v-btn depressed dark class=\"go-button\" v-on:click=\"login\">Ввійти</v-btn>\n\n                            <div  class=\"h-space\"></div>\n                        </v-card-text>\n\n                        <v-card-text class=\"text-xs-center\" v-if=\"activeBtn === 1\">\n                            <h1>Реєстрація</h1>\n\n                            <v-flex xs12>\n                                <v-text-field\n                                        label=\"Емайл\"\n                                        outline\n                                        :rules=\"emailRules\"\n                                        v-model=\"email\"\n                                ></v-text-field>\n                            </v-flex>\n\n                            <v-flex xs12>\n                                <v-text-field\n                                        label=\"Пароль\"\n                                        outline\n                                        :rules=\"passwordRules\"\n                                ></v-text-field>\n                            </v-flex>\n\n                            <div class=\"h-space\"></div>\n\n                            <v-btn depressed dark class=\"go-button\">Зареєструватись</v-btn>\n\n                            <div  class=\"h-space\"></div>\n                        </v-card-text>\n\n                        <v-card-text class=\"text-xs-center\" v-if=\"activeBtn === 2\">\n                            <h1>Введіть емайл</h1>\n\n                            <v-flex xs12>\n                                <v-text-field\n                                        label=\"Емайл\"\n                                        outline\n                                        :rules=\"emailRules\"\n                                        v-model=\"email\"\n                                ></v-text-field>\n                            </v-flex>\n\n                            <div class=\"h-space\"></div>\n\n                            <v-btn depressed dark class=\"go-button\" v-on:click=\"forgetPass\">Відновити доступ</v-btn>\n\n                            <div class=\"h-space\"></div>\n                        </v-card-text>\n\n                        <v-bottom-nav\n                                :active.sync=\"activeBtn\"\n                                :value=\"showNav\"\n                                absolute\n                                color=\"transparent\"\n                        >\n                            <v-btn flat color=\"teal\">\n                                <span>Вхід</span>\n                                <v-icon>fas fa-sign-in-alt</v-icon>\n                            </v-btn>\n\n                            <v-btn flat color=\"teal\">\n                                <span>Реєстрація</span>\n                                <v-icon>fas fa-plus</v-icon>\n                            </v-btn>\n\n                            <v-btn flat color=\"teal\">\n                                <span>Забули пароль?</span>\n                                <v-icon>fas fa-lock-open</v-icon>\n                            </v-btn>\n                        </v-bottom-nav>\n                    </v-card>\n                </v-flex>\n            </v-layout>\n        </v-container>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"Authorization\",\n        data: () => ({\n            password: '7654321AsD',\n            email: 'Stanislavbaraniuk@gmail.com',\n            login_error: '',\n            activeBtn: 0,\n            showNav: true,\n            emailRules: [\n                v => !!v || 'E-mail є обовязковим',\n                v => /.[a-zA-Z/.]{1,}@[a-z]{1,}[.][a-z]{2,}/.test(v) || 'E-mail повинен бути вірним'\n            ],\n            passwordRules: [\n                v => !!v || 'Пароль є обовязковим',\n                v => /.(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/.test(v) || 'Пароль повинен містити 8 символів та складатись з символів a-z, A-Z, 0-9'\n            ]\n        }),\n        methods: {\n            checkPassword(pass) {\n                let is_numb = false, is_az = false, is_AZ = false;\n\n                if (pass.length >= 8) {\n                    for (let i = 0; i < pass.length; i++) {\n                        is_numb = pass[i].match(/\\d/) ? true : is_numb;\n                        is_az = pass[i].match(/\\d/) ? true : is_az;\n                        is_AZ = pass[i].match(/\\d/) ? true : is_AZ;\n                    }\n                } else {\n                    return pass\n                }\n            },\n            login() {\n                if (/.[a-zA-Z/.]{1,}@[a-z]{1,}[.][a-z]{2,}/.test(this.email) && /.(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/.test(this.password)) {\n                    this.TRY_LOGIN(this, this.email, this.password);\n                }\n            },\n            TRY_LOGIN: async (component, email, password) => {\n                let response = await window.api.user.login(email, password);\n\n                if (response.status === 200) {\n                    window.api.storage.setCookie(\"token\", response.data);\n                    window.location.href = '/';\n                } else if(response.status === 401)  {\n                    component.login_error = \"Не вірний логін або пароль\"\n                } else {\n                    component.login_error = \"Щось пішло не так :(\"\n                }\n            },\n            forgetPass() {\n                if (/.[a-zA-Z/.]{1,}@[a-z]{1,}[.][a-z]{2,}/.test(this.email)) {\n                    document.getElementById('alert').style.visibility = 'visible';\n                    setTimeout(function () {\n                        document.getElementById('alert').style.visibility = 'hidden';\n                        window.location.href = '/';\n                    }, 3000);\n                    window.api.user.forget_password(this.email).then(function(result) {\n                        alert(result);\n                    });\n                }\n            },\n            registration() {\n                if (/.[a-zA-Z/.]{1,}@[a-z]{1,}[.][a-z]{2,}/.test(this.email) && /.(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/.test(this.password)) {\n                    window.api.user.registration(this.email, this.password).then(function(result) {\n                        window.api.storage.setCookie(\"token\", result.data);\n                        window.location.href = '/';\n                    });\n                }\n            }\n        }\n    }\n</script>\n\n<style lang=\"sass\" scoped>\n    .auth-page\n        width: 100vw\n        height: 100vh\n        background-color: #38863d\n\n        .button\n            background-color: #38863d\n\n        .authorization\n            z-index: 999\n\n        .h-space\n            height: 30px\n\n        .go-button\n            margin-top: -50px\n            background-color: #38863d\n</style>"]}]}