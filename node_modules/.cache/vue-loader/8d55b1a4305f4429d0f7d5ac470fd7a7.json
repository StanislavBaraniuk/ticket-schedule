{"remainingRequest":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stanislaw/WebstormProjects/ticket-schedule/src/components/index/WayChooser.vue?vue&type=style&index=0&id=573f974e&lang=sass&scoped=true&","dependencies":[{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/src/components/index/WayChooser.vue","mtime":1550566647508},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/css-loader/index.js","mtime":1547214327380},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1547214332896},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/postcss-loader/src/index.js","mtime":1547214329764},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/sass-loader/lib/loader.js","mtime":1547214331198},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/cache-loader/dist/cjs.js","mtime":1547214326837},{"path":"/Users/stanislaw/WebstormProjects/ticket-schedule/node_modules/vue-loader/lib/index.js","mtime":1547214332895}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.way-input\n    color: white !important\n    background-color: white\n    padding: 20px !important\n    padding-bottom: 0 !important\n\n#way-block\n    padding-top: calc(50vh - 100px)\n    @media all and (max-width: 960px)\n        padding-top: calc(50vh - 238px)\n\n    .inside-container\n        z-index: 999\n\n        .inside-card\n            color: white\n\n            .center-icon\n                margin-top: 30px\n\n            .right-icon\n                margin-top: 30px\n\n    .find\n        font-size: 12px\n\n",{"version":3,"sources":["WayChooser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0OA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA","file":"WayChooser.vue","sourceRoot":"src/components/index","sourcesContent":["<template>\n    <div id=\"way-block\" class=\"way-block\">\n    <v-container grid-list-md text-md-center class=\"inside-container\" >\n        <v-layout row align-center fill-height class=\"test\">\n            <v-flex xs12 sm12 md12 lg8 offset-lg2  >\n                <v-card color=\"green darken-2\" class=\"inside-card\">\n                    <v-container grid-list-md text-md-center>\n                        <v-layout row wrap>\n                            <v-flex xs12 sm12 lg4 md4 class=\"way-input\">\n                                <v-autocomplete\n                                        label=\"З відки?\"\n                                        :items=\"stations\"\n                                        placeholder=\"Місто відправки\"\n                                        append-icon=\"place\"\n                                        v-model=\"from\"\n                                ></v-autocomplete>\n                            </v-flex>\n\n                            <v-flex xs12 sm0 lg1 md1>\n                                <i class=\"material-icons center-icon\">\n                                    swap_calls\n                                </i>\n                            </v-flex>\n\n                            <v-flex xs12 sm12 lg4 md4 class=\"way-input\" >\n                                <v-autocomplete\n                                        label=\"Куди?\"\n                                        :items=\"stations\"\n                                        placeholder=\"Місто прибуття\"\n                                        append-icon=\"place\"\n                                        v-model=\"to\"\n                                ></v-autocomplete>\n                            </v-flex>\n                            <v-flex xs12 sm12 lg1 md1>\n                                <i class=\"material-icons right-icon\">event</i>\n                            </v-flex>\n                            <v-flex xs12 sm12 lg2 md2 class=\"way-input\">\n                                <v-menu :close-on-content-click=\"false\" :nudge-right=\"40\"\n                                        lazy\n                                        transition=\"scale-transition\"\n                                        offset-y\n                                        full-width\n                                        min-width=\"290px\"\n                                >\n                                    <v-text-field\n                                            slot=\"activator\"\n                                            v-model=\"date\"\n                                            label=\"Коли?\"\n                                            placeholder=\"День відправки\"\n                                            readonly\n                                    ></v-text-field>\n                                    <v-date-picker v-model=\"date\"></v-date-picker>\n                                </v-menu>\n                            </v-flex>\n                        </v-layout>\n                    </v-container>\n                </v-card>\n                <v-flex xs12>\n                    <v-btn color=\"orange\" dark\n                           @click=\"LOAD_TICKETS\"\n                           :disabled=\"dialog\"\n                           :loading=\"dialog\"\n                    >\n                        <span class=\"find\">Знайти квиток</span>\n                        <v-icon>arrow_forward</v-icon>\n                    </v-btn>\n                    <v-dialog\n                            v-model=\"dialog\"\n                            hide-overlay\n                            persistent\n                            width=\"300\"\n                    >\n                        <v-card\n                                color=\"primary\"\n                                dark\n                        >\n                            <v-card-text>\n                                Відбувається загрузка білетів\n                                <v-progress-linear\n                                        indeterminate\n                                        color=\"white\"\n                                        class=\"mb-0\"\n                                ></v-progress-linear>\n                            </v-card-text>\n                        </v-card>\n                    </v-dialog>\n                </v-flex>\n            </v-flex>\n        </v-layout>\n    </v-container>\n    </div>\n</template>\n\n<script>\n\n    import { mapGetters } from 'vuex';\n\n    export default {\n        name: \"WayChooser\",\n        data: () => ({\n            dialog: false,\n            stations:  []\n        }),\n        watch: {\n            dialog (val) {\n                if (!val) return;\n\n                setTimeout(() => (this.dialog = false), 4000)\n            }\n        },\n        methods: {\n            LOAD_TICKETS: function () {\n                if (this.from.length > 0 && this.to.length > 0 && new Date(this.def_date) >= new Date(new Date().toJSON().slice(0,10).replace(/-/g,'-'))) {\n                    this.$store.dispatch(\"SET_TICKETS\", []);\n                    this.$store.dispatch('SET_ACTIVE_PAGE');\n                    this.$store.dispatch(\"BLOCK_LOADER_ACTIVATE\", \"contentBlock\");\n\n                    let from = this.def_from;\n                    let to = this.def_to;\n\n                    let filter = {\n                        FROM_PLACE: this.def_stations_list.filter(function (val) {\n                            return val.NAME === from\n                        })[0].ID,\n                        TO_PLACE: this.def_stations_list.filter(function (val) {\n                            return val.NAME === to\n                        })[0].ID,\n                        FROM_DATE: this.def_date,\n                        TYPE: this.def_type\n                    };\n\n                    this.GET_FILTERED_TICKETS(this, window.api.storage.getToken(), filter).then(function (res) {\n                        if (res.data !== undefined) {\n                            res.this.$store.dispatch(\"SET_TICKETS\", res.data);\n                        }\n                        res.this.$store.dispatch(\"BLOCK_LOADER_DEACTIVATE\", \"contentBlock\");\n                    });\n\n\n                }\n            },\n\n            GET_FILTERED_TICKETS: async (component, token, filter) => {\n                {\n                    let data = await window.api.ticket.getFilteredTickets(token, filter);\n\n                    if (data.status === 200) {\n                        return  {this: component, data: data.data};\n                    } else {\n                        return {this: component, data: undefined};\n                    }\n                }\n            },\n\n            GET_STATIONS: async (component, token) => {\n                {\n                    let data = await window.api.stations.getAll(token);\n\n\n                    if (data.status === 200) {\n                        component.stations  = Object.values(data.data);\n\n                        component.$store.commit('SET_STATIONS',component.stations);\n                    }\n                }\n            },\n\n            /**\n             * @return {string}\n             */\n            GET_KEY_BY_VALUE: function (object, value) {\n                return Object.keys(object).find(key => object[key] === value);\n            },\n            LOAD_STATIONS_WITH_KEY: async (component, token) => {\n                {\n                    let data = await window.api.stations.getWithKeys(token);\n\n\n                    if (data.status === 200) {\n                        component.$store.commit('SET_STATIONS_LIST', data.data);\n                    }\n                }\n            }\n        },\n        mutations: {\n            dialogC: function () {\n                this.dialog = true;\n            }\n        },\n        created() {\n            let token = window.api.storage.getToken();\n\n            this.GET_STATIONS(this, token);\n            this.LOAD_STATIONS_WITH_KEY(this, token);\n        },\n        computed: {\n            from: {\n                get () {\n                    return this.def_from;\n                },\n                set (value) {\n                    this.$store.commit('SET_FROM', value)\n                }\n            },\n            to: {\n                get () {\n                    return this.def_to;\n                },\n                set (value) {\n                    this.$store.commit('SET_TO', value)\n                }\n            },\n            date: {\n                get () {\n                    return this.def_date;\n                },\n                set (value) {\n                    this.$store.commit('SET_DATE', value)\n                }\n            },\n            ...mapGetters({\n                def_from: 'GET_FROM',\n                def_to: \"GET_TO\",\n                def_date: \"GET_DATE\",\n                def_type: \"GET_TYPE\",\n                def_stations_list: \"GET_STATIONS_LIST\"\n            })\n        }\n    }\n\n</script>\n\n<style lang=\"sass\" scoped>\n\n    .way-input\n        color: white !important\n        background-color: white\n        padding: 20px !important\n        padding-bottom: 0 !important\n\n    #way-block\n        padding-top: calc(50vh - 100px)\n        @media all and (max-width: 960px)\n            padding-top: calc(50vh - 238px)\n\n        .inside-container\n            z-index: 999\n\n            .inside-card\n                color: white\n\n                .center-icon\n                    margin-top: 30px\n\n                .right-icon\n                    margin-top: 30px\n\n        .find\n            font-size: 12px\n\n</style>"]}]}